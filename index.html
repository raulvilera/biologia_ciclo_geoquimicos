<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<title>Atividade de Biologia - 3º Bimestre</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:sans-serif;}
body{background:#f0f0f0;padding:20px;}
.container{max-width:900px;margin:0 auto;background:#fff;padding:25px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,0.1);}
header{text-align:center;margin-bottom:20px;}
.question-container{background:#e0f7fa;margin-bottom:15px;padding:15px;border-radius:8px;}
.options{display:grid;gap:5px;margin-top:10px;}
.option input{margin-right:8px;}
.buttons{margin-top:15px;text-align:center;}
button{padding:10px 20px;border:none;border-radius:6px;background:#26d0ce;color:#fff;font-weight:bold;cursor:pointer;}
#results{display:none;margin-top:20px;background:#c8e6c9;padding:10px;border-radius:6px;}
.loading{display:none;text-align:center;margin:10px;font-weight:bold;}
</style>
</head>
<body>
<div class="container">
  <header>
    <h2>Atividade de Biologia (3º Bimestre)</h2>
    <p>Revisão dos principais conceitos estudados no bimestre</p>
  </header>

  <div class="student-info" style="margin-bottom:20px;">
    <label>Nome: 
      <select id="student-name"><option value="">Selecione seu nome</option></select>
    </label>
    <label>Nº: <input id="student-number" readonly></label>
    <label>Email: <input id="student-email" readonly></label>
  </div>

  <div id="questions-container"></div>

  <div class="loading" id="loading">Enviando respostas...</div>

  <div class="buttons">
    <button id="submit-btn">Enviar Respostas</button>
  </div>

  <div id="results">
    <p id="result-message"></p>
  </div>
</div>

<script>
// Lista de alunos (abreviada, insira todos os que precisar)
const students = [
  {id:1,name:"ALEXANDRE BATISTA DOS SANTOS",email:"00001141439785SP@al.educacao.sp.gov.br"},
  {id:5,name:"ANA LÍVIA BRAGA DOS SANTOS",email:"00001122248246SP@al.educacao.sp.gov.br"},
  {id:7,name:"ARTHUR CASTRO SILVA",email:"00001122238228SP@al.educacao.sp.gov.br"},
  {id:11,name:"DANIELLE OLIVEIRA DA SILVA NUNES",email:"00001122096756SP@al.educacao.sp.gov.br"},
  {id:14,name:"ELOYSA ANDRADE OLIVEIRA SILVA",email:"00001103565242SP@al.educacao.sp.gov.br"}
  // Continue com todos os alunos...
];

// Preenche dropdown
const select = document.getElementById('student-name');
students.forEach(s=>{
  const opt = document.createElement('option');
  opt.value=s.name;
  opt.textContent=s.name;
  select.appendChild(opt);
});

select.addEventListener('change',()=>{
  const sel = students.find(s=>s.name===select.value);
  document.getElementById('student-number').value=sel?sel.id:'';
  document.getElementById('student-email').value=sel?sel.email:'';
});

// QUESTÕES (10) com maior contextualização e dificuldade
const allQuestions = [
  {
    id:1,
    question:`Em uma floresta tropical, pesquisadores estudaram a eficiência energética nas cadeias alimentares. Observou-se que, a cada nível trófico, apenas uma fração da energia é transferida. Considerando os conceitos de termodinâmica e ecologia, qual é a principal razão dessa diminuição de energia disponível?`,
    options:[
      {id:'a',text:'A energia é dissipada principalmente na forma de calor durante o metabolismo, limitando a quantidade transferida aos consumidores seguintes.'},
      {id:'b',text:'A energia é bloqueada pelos decompositores que consomem a maior parte antes que outros níveis a recebam.'},
      {id:'c',text:'A energia é completamente absorvida pelos produtores, impedindo que chegue aos consumidores primários.'},
      {id:'d',text:'A energia é perdida devido à competição entre espécies dentro do mesmo nível trófico.'}
    ]
  },
  {
    id:2,
    question:`Durante o estudo de um lago eutrofizado, observou-se proliferação intensa de algas seguida de mortalidade de peixes. Analise o processo e indique qual sequência de eventos melhor descreve a eutrofização e seus efeitos na biodiversidade aquática.`,
    options:[
      {id:'a',text:'Aumento de nutrientes → proliferação de algas → bloqueio de luz → morte de plantas → decomposição → consumo de oxigênio → morte de peixes.'},
      {id:'b',text:'Acúmulo de sedimentos → redução de profundidade → aumento de temperatura → alteração das comunidades biológicas.'},
      {id:'c',text:'Liberação de toxinas → aumento de temperatura → extinção de espécies microbianas → recuperação natural.'},
      {id:'d',text:'Acidificação do lago → proliferação de algas → oxigenação do ambiente → aumento da biodiversidade.'}
    ]
  },
  {
    id:3,
    question:`Em experimentos de fotossíntese, alunos investigaram a influência da intensidade luminosa e da disponibilidade de CO₂ em plantas aquáticas. Qual variável afeta diretamente a fase fotoquímica da fotossíntese e por quê?`,
    options:[
      {id:'a',text:'A intensidade luminosa, pois fornece energia para excitar elétrons e iniciar a cadeia de transporte eletrônico.'},
      {id:'b',text:'A disponibilidade de CO₂, pois determina diretamente a quantidade de ATP produzido na fase clara.'},
      {id:'c',text:'A temperatura, pois controla a absorção de água pelas folhas e produção de O₂.'},
      {id:'d',text:'A concentração de nutrientes minerais no solo, pois influencia a fotólise da água.'}
    ]
  },
  {
    id:4,
    question:`O aumento de CO₂ atmosférico está relacionado à acidificação dos oceanos. Em estudos recentes, percebeu-se que a dissolução de CO₂ na água do mar altera o equilíbrio químico e a vida marinha. Qual mecanismo explica essa acidificação?`,
    options:[
      {id:'a',text:'O CO₂ dissolve-se na água formando ácido carbônico, aumentando a concentração de H+ e reduzindo o pH.'},
      {id:'b',text:'O aumento de CO₂ estimula o crescimento de algas que acidificam a água.'},
      {id:'c',text:'O CO₂ reage com o oxigênio do mar formando óxidos que diminuem o pH.'},
      {id:'d',text:'O CO₂ precipita na forma de carbonato de cálcio, liberando íons H+.'}
    ]
  },
  {
    id:5,
    question:`Durante a observação do ciclo do nitrogênio em um solo agrícola, foram identificadas bactérias fixadoras de N₂ e bactérias nitrificantes. Qual é a importância ecológica da fixação biológica do nitrogênio?`,
    options:[
      {id:'a',text:'Converte N₂ atmosférico em amônia, tornando o nitrogênio disponível para os produtores primários.'},
      {id:'b',text:'Converte nitrato em nitrito, completando o ciclo do nitrogênio.'},
      {id:'c',text:'Libera gás nitroso para a atmosfera, regulando a pressão atmosférica.'},
      {id:'d',text:'Aumenta a concentração de nitrogênio nos decompositores, acelerando a decomposição.'}
    ]
  },
  {
    id:6,
    question:`Em áreas de cerrado com solos ácidos e pobres em fósforo, muitas plantas desenvolveram associações com fungos micorrízicos. Qual a vantagem ecológica dessa adaptação?`,
    options:[
      {id:'a',text:'Aumenta a absorção de fósforo e outros nutrientes essenciais em solos pobres, melhorando o crescimento vegetal.'},
      {id:'b',text:'Permite às plantas capturar água diretamente da atmosfera em regiões secas.'},
      {id:'c',text:'Bloqueia o crescimento de espécies competidoras, garantindo exclusividade territorial.'},
      {id:'d',text:'Produz toxinas que eliminam herbívoros e polinizadores.'}
    ]
  },
  {
    id:7,
    question:`A respiração celular é essencial para a produção de ATP. Comparando respiração aeróbica e fermentação, qual é a principal vantagem da respiração aeróbica em termos energéticos?`,
    options:[
      {id:'a',text:'Permite a oxidação completa da glicose utilizando oxigênio como aceptor final de elétrons, produzindo maior quantidade de ATP.'},
      {id:'b',text:'Produz ATP sem necessidade de oxigênio, tornando o processo mais rápido.'},
      {id:'c',text:'Gera subprodutos que aceleram a fotossíntese em plantas próximas.'},
      {id:'d',text:'Depende apenas de nutrientes minerais, tornando a respiração mais eficiente.'}
    ]
  },
  {
    id:8,
    question:`Estudos sobre biodiversidade em ecossistemas terrestres mostraram que áreas com maior diversidade de espécies tendem a ser mais estáveis. Qual mecanismo ecológico explica essa relação entre diversidade e estabilidade?`,
    options:[
      {id:'a',text:'A redundância funcional, onde múltiplas espécies desempenham funções semelhantes, garantindo que o ecossistema mantenha suas funções mesmo se algumas forem perdidas.'},
      {id:'b',text:'A competição intensa entre espécies impede a dominação de uma única espécie, aumentando a estabilidade.'},
      {id:'c',text:'A presença de predadores elimina todas as espécies fracas, deixando apenas espécies fortes.'},
      {id:'d',text:'O clima controla todos os processos ecológicos, tornando a diversidade irrelevante para a estabilidade.'}
    ]
  },
  {
    id:9,
    question:`O desmatamento e a fragmentação de habitats impactam diretamente a migração de polinizadores e dispersores de sementes. Qual é a consequência mais direta desses impactos na regeneração vegetal?`,
    options:[
      {id:'a',text:'Redução na diversidade genética e menor regeneração natural das plantas, comprometendo a resiliência do ecossistema.'},
      {id:'b',text:'Aumento da polinização cruzada, melhorando a qualidade das sementes.'},
      {id:'c',text:'Maior crescimento de espécies pioneiras, mantendo o equilíbrio ecológico.'},
      {id:'d',text:'Aumento da competição por nutrientes entre plantas, acelerando a regeneração.'}
    ]
  },
  {
    id:10,
    question:`Pesquisadores analisaram os impactos do aquecimento global nos recifes de coral. Observou-se branqueamento intenso seguido de mortalidade. Qual é o principal fator bioquímico responsável pelo branqueamento?`,
    options:[
      {id:'a',text:'Estresse térmico que causa a expulsão das zooxantelas simbióticas, reduzindo a capacidade fotossintética dos corais.'},
      {id:'b',text:'Aumento do CO₂ atmosférico que altera a salinidade, destruindo os corais.'},
      {id:'c',text:'Poluição sonora que impede a reprodução sexual dos corais.'},
      {id:'d',text:'Acidificação do oceano que transforma o cálcio do esqueleto em dióxido de carbono.'}
    ]
  }
];

// Renderiza questões
const container = document.getElementById('questions-container');
allQuestions.forEach(q=>{
  const qDiv = document.createElement('div');
  qDiv.classList.add('question-container');
  let html=`<div class="question-text"><strong>${q.id}.</strong> ${q.question}</div>`;
  html+='<div class="options">';
  q.options.forEach(o=>{
    html+=`<label class="option"><input type="radio" name="q${q.id}" value="${o.id}"> ${o.text}</label>`;
  });
  html+='</div>';
  qDiv.innerHTML=html;
  container.appendChild(qDiv);
});

// Envio
document.getElementById('submit-btn').addEventListener('click',async()=>{
  const studentName = select.value;
  if(!studentName){alert('Selecione seu nome');return;}
  const answers={};
  allQuestions.forEach(q=>{
    const sel = document.querySelector(`input[name="q${q.id}"]:checked`);
    answers[q.id] = sel?sel.value:'';
  });

  document.getElementById('loading').style.display='block';
  document.getElementById('results').style.display='none';

  try{
    const res = await fetch(location.href,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({studentName,answers})
    });
    const result = await res.json();
    document.getElementById('loading').style.display='none';
    document.getElementById('result-message').textContent=result.message;
    document.getElementById('results').style.display='block';
  }catch(err){
    document.getElementById('loading').style.display='none';
    alert('Erro na comunicação com o WebApp: '+err.message);
  }
});
</script>
</body>
</html>
